# Day 2 下午 - 10. 技能与自定义命令

预计时间：1小时

## 📚 学习目标

- [ ] 了解内置技能（/commit, /review-pr 等）
- [ ] 学习创建自定义技能
- [ ] 掌握技能链和工作流自动化
- [ ] 完成实际练习：创建自定义工作流技能

## 🎯 第一步：内置技能

### 什么是技能？

技能（Skills）是预先配置的提示词，可以通过简短的命令调用。它们封装了常见的工作流程和任务。

### 常用内置技能

查看可用技能：

```
列出所有可用的技能
```

### /commit 技能

创建 Git 提交的智能助手：

```
使用 /commit 技能
```

**功能：**
- 自动分析更改
- 生成提交信息
- 执行提交操作
- 遵循最佳实践

### 练习 1: 使用 /commit

```
任务：创建规范的提交

1. 修改一些文件（添加注释、修复 bug 等）
2. 使用 /commit 技能
3. 观察 Claude 如何：
   - 分析更改
   - 生成提交信息
   - 执行提交
4. 查看生成的提交
```

### /review-pr 技能

代码审查助手：

```
使用 /review-pr 技能审查 PR #123
```

**功能：**
- 分析 PR 更改
- 检查代码质量
- 提供改进建议
- 评估风险

### 练习 2: 模拟 PR 审查

```
任务：代码审查

1. 创建一些代码更改
2. 创建一个分支和 PR（模拟）
3. 使用 /review-pr 技能审查
4. 审查建议：
   - 代码质量
   - 测试覆盖
   - 文档完整性
   - 性能考虑
```

## 🔧 第二步：自定义技能

### 创建技能的步骤

1. **定义触发词**：如 `/my-task`
2. **编写提示词**：详细的任务描述
3. **配置参数**：接受用户输入
4. **测试技能**：验证功能
5. **优化改进**：根据反馈调整

### 技能模板

```
触发词：/your-skill

提示词模板：
你是一个[角色描述]。

任务：
1. [步骤 1]
2. [步骤 2]
3. [步骤 3]

要求：
- [要求 1]
- [要求 2]

输出格式：
[期望的输出格式]
```

### 练习 3: 创建简单技能

```
任务：创建代码格式化技能

创建一个名为 /format 的技能：

功能：
1. 读取指定文件
2. 格式化代码（添加缩进、空行等）
3. 统一代码风格
4. 保持功能不变

触发词：/format
参数：文件路径

实现并测试这个技能。
```

### 练习 4: 创建文档生成技能

```
任务：自动生成文档

创建 /doc-gen 技能：

功能：
1. 分析代码文件
2. 生成 API 文档
3. 包含函数签名
4. 添加使用示例
5. 生成 Markdown 输出

参数：
- 文件路径
- 文档类型（API/指南/教程）

实现并测试。
```

## ⛓️ 第三步：技能链和工作流

### 什么是技能链？

将多个技能组合起来，形成自动化工作流。

### 工作流设计

**简单工作流：**

```
/analyze → /refactor → /test → /commit
```

**复杂工作流：**

```
/check-style → /fix-issues → /run-tests → /generate-report
```

### 练习 5: 创建代码审查工作流

```
任务：自动化代码审查流程

创建一个完整的审查工作流：

步骤：
1. /lint-check - 运行代码检查
2. /security-scan - 安全扫描
3. /test-coverage - 测试覆盖率
4. /review - 代码审查
5. /report - 生成报告

实现这个工作流技能：/full-review
```

### 练习 6: 创建发布工作流

```
任务：自动化发布流程

创建 /release 技能：

流程：
1. 检查 git 状态
2. 运行所有测试
3. 更新版本号
4. 生成 CHANGELOG
5. 创建 git tag
6. 推送到远程
7. 生成发布说明

参数：
- 版本类型（major/minor/patch）

实现完整流程。
```

## 🎨 第四步：高级技能设计

### 参数化技能

创建接受参数的技能：

```
技能：/refactor
参数：[文件路径] [重构类型]

类型：
- extract-function - 提取函数
- simplify - 简化逻辑
- optimize - 性能优化
- rename - 重命名
```

### 练习 7: 参数化技能

```
任务：创建多功能重构技能

创建 /refactor-all 技能：

参数：
1. 目标目录
2. 重构类型（单个或多个）
3. 选项（如：dry-run）

支持的重构：
- 统一命名风格
- 提取重复代码
- 简化条件逻辑
- 改进错误处理
- 添加类型注解

实现并测试各种组合。
```

### 条件技能

根据条件执行不同操作：

```
技能：/smart-commit

逻辑：
1. 检查更改类型
2. 如果是文档 → 使用 "docs:" 前缀
3. 如果是代码 → 使用 "feat:" 或 "fix:" 前缀
4. 如果是重构 → 使用 "refactor:" 前缀
5. 生成符合规范的提交信息
```

### 练习 8: 智能任务技能

```
任务：创建智能任务处理器

创建 /smart-task 技能：

功能：
1. 分析任务类型
2. 选择合适的处理策略
3. 执行相应操作
4. 生成报告

任务类型：
- bug-fix - 修复 bug
- feature - 新功能
- refactor - 重构
- docs - 文档
- test - 测试
- chore - 杂项

实现智能分类和处理。
```

## 🚀 第五步：综合项目

### 练习 9: 开发工具箱

```
任务：创建开发工具箱技能集

创建一套完整的开发技能：

1. /new-component - 创建新组件
   - 生成文件结构
   - 添加基础代码
   - 包含测试文件
   - 生成文档

2. /api-endpoint - 添加 API 端点
   - 创建路由
   - 实现控制器
   - 添加验证
   - 编写测试

3. /database-model - 创建数据模型
   - 定义 schema
   - 创建迁移
   - 添加关系
   - 生成文档

4. /test-suite - 生成测试套件
   - 单元测试
   - 集成测试
   - E2E 测试
   - 测试数据

创建完整的工具箱并文档化。
```

### 练习 10: 学习助手技能

```
任务：创建学习助手

为这个学习计划创建辅助技能：

1. /lesson - 开始课程
   - 定位课程文件
   - 显示学习目标
   - 列出练习
   - 提供帮助

2. /exercise - 打开练习
   - 显示练习要求
   - 提供提示
   - 检查答案
   - 记录进度

3. /review - 复习课程
   - 总结重点
   - 强化记忆
   - 提供测验
   - 推荐延伸

4. /progress - 显示进度
   - 已完成课程
   - 待学习内容
   - 学习统计
   - 下一步建议

实现这套学习助手技能。
```

## 📋 检查点

在继续之前，确保你：

- [ ] 理解技能的概念和用途
- [ ] 掌握创建自定义技能的方法
- [ ] 能够设计和实现技能链
- [ ] 理解参数化和条件技能
- [ ] 完成了至少 3 个技能练习

## 💡 最佳实践

### 技能设计原则

1. **单一职责**：一个技能做一件事
2. **清晰命名**：易于理解和记忆
3. **文档完整**：说明用途和参数
4. **错误处理**：优雅处理异常情况
5. **可组合**：可以与其他技能配合

### 技能命名建议

```
✅ 好的命名：
/commit
/test-all
/refactor-code
/generate-docs

❌ 不好的命名：
/do-stuff
/thing
/helper
/worker
```

### 提示词编写技巧

```
结构化的提示词：

角色：你是一个[专业角色]

任务：
1. 明确的步骤 1
2. 明确的步骤 2
3. 明确的步骤 3

约束：
- 约束条件 1
- 约束条件 2

输出：
- 期望的输出格式
- 包含的内容
```

## 🔧 技能管理

### 列出所有技能

```
显示所有已配置的技能
```

### 查看技能详情

```
显示 /commit 技能的详细配置
```

### 更新技能

```
更新 /my-skill 技能的提示词
```

### 删除技能

```
删除不再使用的技能
```

## 🚀 下一步

完成本节后，继续学习 [11-plan-mode.md](./11-plan-mode.md) - Plan 模式与复杂任务。

## 📝 技能模板库

### 常用技能模板

**代码检查：**
```
技能：/check
功能：运行代码检查工具并修复问题
```

**测试生成：**
```
技能：/test-gen
功能：为指定代码生成测试用例
```

**文档生成：**
```
技能：/doc
功能：生成代码文档
```

**重构：**
```
技能：/refactor
功能：重构代码以改进质量
```

## 🎓 高级技巧

### 技能组合模式

**顺序执行：**
```
技能 A 的输出传递给技能 B
```

**并行执行：**
```
同时运行多个技能
汇总结果
```

**条件分支：**
```
根据条件选择不同技能
```

### 上下文共享

```
技能之间共享上下文：

1. /analyze - 分析代码
2. （保存分析结果）
3. /refactor - 基于分析结果重构
4. /test - 测试重构后的代码
5. /commit - 提交更改
```

## ⚠️ 常见问题

**问题：技能执行失败**
```
检查：
1. 提示词是否清晰
2. 参数是否正确
3. 文件是否存在
4. 权限是否足够
```

**问题：技能输出不符合预期**
```
改进：
1. 更详细的提示词
2. 添加示例
3. 明确输出格式
4. 添加约束条件
```

## 🏆 综合挑战

```
挑战：完整的开发工作流

创建一套完整的开发技能：

场景：Web 应用开发

技能集：

1. 项目初始化
   /init-webapp
   - 创建项目结构
   - 配置工具
   - 生成基础文件

2. 功能开发
   /add-feature
   - 生成代码
   - 添加测试
   - 更新文档

3. 质量保证
   /qa-check
   - 代码检查
   - 安全扫描
   - 性能测试

4. 部署准备
   /prepare-deploy
   - 运行测试
   - 构建项目
   - 生成部署包

5. 发布
   /release
   - 版本管理
   - 生成 changelog
   - 创建发布

实现完整的开发流程自动化。
```

## 📖 参考资源

- Claude Code 技能文档
- 技能示例库
- 最佳实践指南
- 社区贡献的技能
