# Day 2 上午 - 9. MCP 服务器与扩展功能

预计时间：1小时

## 📚 学习目标

- [ ] 理解 MCP (Model Context Protocol) 服务器概念
- [ ] 学习使用内置 MCP 工具
- [ ] 了解如何配置外部 MCP 服务器
- [ ] 完成实际练习：使用网络搜索和图像分析

## 🔌 第一步：MCP 服务器概念

### 什么是 MCP？

MCP (Model Context Protocol) 是一个开放协议，允许 Claude Code 连接到外部数据源和工具。

### MCP 的优势

- **扩展能力**：访问外部数据和 API
- **标准化**：统一的接口标准
- **可组合**：可以同时使用多个 MCP 服务器
- **安全性**：受控的数据访问

### 内置 MCP 工具

当前可用的 MCP 工具：

| 工具 | 功能 | 使用场景 |
|------|------|----------|
| **web-search** | 网络搜索 | 查找最新信息、文档 |
| **image-analysis** | 图像分析 | 理解图片内容 |
| **web-reader** | 网页阅读 | 获取网页内容 |
| **data-visualization** | 数据可视化分析 | 分析图表和数据 |

## 🔍 第二步：网络搜索 (Web Search)

### 基本用法

**简单搜索：**

```
搜索 "TypeScript best practices 2026"
```

**高级搜索：**

```
搜索最新的 React 性能优化技巧
只查看 2026 年的文档
```

### 实用场景

**查找文档：**

```
搜索 "Node.js fetch API documentation"
```

**解决问题：**

```
搜索 "Python asyncio memory leak solutions"
```

**学习新技术：**

```
搜索 "Rust vs Go comparison 2026"
```

### 练习 1: 技术文档搜索

```
任务：查找最新文档

使用网络搜索：

1. 搜索 "Claude Code official documentation"
2. 搜索 "Git best practices 2026"
3. 搜索 "JavaScript ES2024 features"
4. 搜索 "TypeScript 5.3 new features"

对于每个搜索：
- 总结找到的主要信息
- 记录重要链接
- 提取关键知识点
```

### 练习 2: 问题解决搜索

```
任务：技术问题研究

假设遇到以下问题，使用网络搜索找到解决方案：

1. "npm install hangs on macOS"
2. "Python pandas memory optimization"
3. "React useEffect infinite loop"
4. "Docker container DNS issues"

对于每个问题：
- 找出可能的原因
- 记录解决方案
- 识别最佳实践
```

### 练习 3: 技术趋势研究

```
任务：行业趋势分析

使用网络搜索研究：

1. "前端框架趋势 2026"
2. "AI 编程工具对比"
3. "WebAssembly 最新进展"
4. "Serverless 架构最佳实践"

生成技术趋势报告，包括：
- 主要趋势
- 技术对比
- 推荐学习方向
```

## 🖼️ 第三步：图像分析

### 图像分析工具

**基本分析：**

```
分析这张截图：[提供图片路径]
描述界面布局和主要组件
```

**UI 转代码：**

```
根据这个设计图生成前端代码
```

**错误诊断：**

```
分析这个错误截图
提供解决方案
```

### 练习 4: UI 设计理解

```
任务：界面分析

如果你有 UI 设计图：

1. 分析布局结构
2. 识别组件类型
3. 理解交互流程
4. 提取设计规范：
   - 颜色方案
   - 字体样式
   - 间距规则
   - 组件尺寸

生成设计文档。
```

### 练习 5: 代码截图理解

```
任务：代码截图分析

分析代码截图：

1. 识别编程语言
2. 提取代码内容
3. 理解代码逻辑
4. 找出潜在问题
5. 提供改进建议
```

## 🌐 第四步：网页阅读 (Web Reader)

### 使用 Web Reader

**获取网页内容：**

```
读取 https://example.com 的内容
以 Markdown 格式返回
```

**保留图片：**

```
读取网页内容并保留所有图片
```

### 练习 6: 技术文章阅读

```
任务：深度阅读

使用 Web Reader：

1. 读取一篇技术博客文章
2. 提取关键概念
3. 总结主要内容
4. 识别实用技巧
5. 生成笔记

推荐文章：
- JavaScript 框架对比
- Git 工作流最佳实践
- REST API 设计指南
```

### 练习 7: 文档研究

```
任务：API 文档研究

使用 Web Reader 研究 API 文档：

1. 读取官方 API 文档
2. 提取所有 API 端点
3. 分析参数和响应格式
4. 识别使用示例
5. 生成速查表

选择一个你感兴趣的 API（如 GitHub API, Stripe API 等）
```

## 📊 第五步：数据可视化分析

### 分析图表

```
分析这个数据可视化图表：
[提供图片]

提取：
- 主要趋势
- 异常值
- 关键指标
- 洞察和建议
```

### 练习 8: 性能图表分析

```
任务：性能数据分析

如果有性能图表：

1. 分析响应时间趋势
2. 识别性能瓶颈
3. 找出异常峰值
4. 提供优化建议
5. 预测未来趋势
```

## 🔧 第六步：配置外部 MCP 服务器

### MCP 配置文件

MCP 服务器在配置文件中定义：

```json
{
  "mcpServers": {
    "server-name": {
      "command": "server-command",
      "args": ["--arg1", "arg2"]
    }
  }
}
```

### 常用 MCP 服务器

**文件系统访问：**
- 本地文件系统增强访问

**数据库连接：**
- PostgreSQL, MySQL, MongoDB

**API 集成：**
- GitHub, GitLab, Jira

**开发工具：**
- 测试运行器、代码覆盖率

### 练习 9: MCP 配置

```
任务：MCP 服务器配置

研究并配置一个 MCP 服务器：

1. 选择一个 MCP 服务器：
   - GitHub MCP
   - Filesystem MCP
   - Database MCP

2. 查找配置文档
3. 配置服务器
4. 测试连接
5. 使用功能
6. 编写使用指南
```

## 🎯 第七步：综合练习

### 练习 10: 研究项目

```
任务：完整研究流程

使用 MCP 工具完成一个研究项目：

主题："构建现代 CLI 工具"

步骤：

1. 使用 Web Search 搜索：
   - "CLI framework comparison 2026"
   - "Commander.js vs Yargs vs Oclif"
   - "CLI best practices"

2. 使用 Web Reader 阅读文档：
   - 选择框架的官方文档
   - 阅读最佳实践指南

3. 整理研究发现：
   - 框架对比表
   - 优缺点分析
   - 推荐方案
   - 实施建议

4. 生成完整报告
```

### 练习 11: 问题诊断与解决

```
任务：端到端问题解决

场景：应用性能问题

1. 收集信息：
   - 使用 Web Search 搜索类似问题
   - 查找解决方案

2. 阅读文档：
   - 使用 Web Reader 阅读相关文档
   - 理解工具和技巧

3. 分析数据：
   - 如果有性能图表，使用分析工具
   - 识别瓶颈

4. 提供解决方案：
   - 结合所有信息
   - 提供详细步骤
   - 包括预防措施
```

## 📋 检查点

在继续之前，确保你：

- [ ] 理解 MCP 的概念和优势
- [ ] 能够使用 Web Search 查找信息
- [ ] 能够使用 Web Reader 获取网页内容
- [ ] 了解图像分析工具的用途
- [ ] 完成了至少 3 个 MCP 练习

## 💡 最佳实践

### 搜索技巧

```
✅ 具体的搜索查询
"React useEffect cleanup function example"

❌ 模糊的搜索
"React hooks problem"
```

### 信息验证

```
搜索结果需要验证：
1. 检查来源可信度
2. 对比多个来源
3. 确认信息时效性
4. 测试建议方案
```

### 效率优化

```
组合使用 MCP 工具：

1. 先用 Web Search 找到资源
2. 再用 Web Reader 深入阅读
3. 结合文档和示例
4. 综合分析和应用
```

## 🔧 实用命令

### 搜索过滤器

```
# 按时间过滤
搜索 "Vue 3" 限定最近一个月的内容

# 按域名过滤
只从 github.com 搜索结果

# 排除域名
搜索但不包含 example.com
```

## 🚀 下一步

完成本节后，休息一下，然后继续学习 Day 2 下午课程 [10-skills.md](../afternoon/10-skills.md) - 技能与自定义命令。

## 📝 我的笔记

```bash
# MCP 工具使用记录

# 有用的搜索查询：
#
#

# 学习资源：
#
#

# 图像分析技巧：
#
#
```

## 🎓 扩展学习

### 探索更多 MCP 服务器

```
研究并尝试：

1. GitHub MCP - 仓库和 PR 管理
2. Slack MCP - 消息和通知
3. Google Drive MCP - 文档访问
4. Postgres MCP - 数据库操作
```

### 自定义 MCP 服务器

```
学习构建自己的 MCP 服务器：

1. 了解 MCP 协议规范
2. 选择实现语言
3. 实现 MCP 接口
4. 测试和调试
5. 发布和分享
```

## ⚠️ 注意事项

**API 密钥安全：**
```
❌ 在搜索中包含 API 密钥
✅ 使用环境变量存储密钥
```

**信息时效性：**
```
注意检查文档和文章的发布日期
确保使用最新的信息
```

## 🏆 综合挑战

```
挑战：MCP 工具链

任务：创建技术决策文档

使用多个 MCP 工具：

主题：选择前端测试框架

1. Web Search：搜索框架对比
2. Web Reader：阅读官方文档
3. 整理：生成对比表格
4. 分析：提供推荐理由
5. 文档：创建决策文档

输出：
- 框架对比表
- 优缺点分析
- 推荐方案
- 实施计划
- 风险评估
```
